{% extends "base.html" %}

{% block extrahead %}
<style>
div.comment {
    border-bottom: 1px solid #ccc;
}
</style>
{% endblock %}

{% block extrajs %}
{% javascript 'new_comments' %}
{% endblock %}


{% block content %}

{% csrf_token %}
<div class="comments"
  data-approve-all-url="{{ url("approve_delete_blog_post_comments", "approve") }}"
  data-delete-all-url="{{ url("approve_delete_blog_post_comments", "delete") }}"
  >
  <button type="button" class="ui button primary approve-all-button">Approve All Selected</button>
  <button type="button" class="ui button yellow delete-all-button">Delete All Selected</button>
  <hr/>
  {% for comment in comments %}
  <div class="comment">
    <blockquote>
      <p>{{ comment.rendered|safe }}</p>
      <p class="approval">
        {% if not comment.approved %}
        <input type="checkbox" name="ids" value="{{ comment.id }}"/>
        <a class="ui red small label">Not approved</a>
        <button class="small ui button primary approve-button" data-url="{{ comment.blogitem.get_absolute_url() }}/approve/{{ comment.oid }}">approve</button>
        <button class="small ui button yellow delete-button" data-url="{{ comment.blogitem.get_absolute_url() }}/delete/{{ comment.oid }}">delete</button>
        <br>
        {% endif %}
      </p>
      <small>{% if comment.name %}<b>{{ comment.name }}</b>{% else %}<em>Anonymous</em>{% endif %}
      on <a href="{{ comment.blogitem.get_absolute_url() }}{% if not comment.approved %}?admin=1{% endif %}#{{ comment.oid }}">{{ comment.blogitem.title }}</a>
      {{ timesince(comment.add_date) }} ago
      </small>
    </blockquote>
  </div>
  {% endfor %}
  <hr/>
  <button type="button" class="ui button primary approve-all-button">Approve All Selected</button>
  <button type="button" class="ui button yellow delete-all-button">Delete All Selected</button>

</div>

{% endblock %}
